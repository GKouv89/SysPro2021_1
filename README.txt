1η Εργασία Προγραμματισμού Συστήματος
Ονοματεπώνυμο: Γεωργία Κουτίβα
Αριθμός Μητρώου: 1115201700060

Οδηγίες Μεταγλώττισης και Εκτέλεσης:
  Μεταγλώττιση: make
  ΠΡΟΣΟΧΉ: Ο φάκελος build είναι κενός αλλά απαραίτητος για να λειτουργήσει σωστά η μεταγλώττιση,
  καθώς εκεί θα αποθηκευθούν τα .ο αρχεία.
  Εκτέλεση: ./vaccineMonitor -b bf_size_in_Bytes -c file_name
  Η σειρά των flags -b, -c μπορεί να αλλάξει, απλά θα πρέπει το κάθε flag να ακολουθείται από το αντίστοιχο όρισμα.
  Εκτέλεση του bash script: ./testFile.sh viruses_file_name countries_file_name no_of_records duplicatesAllowed
  (Ακριβώς όπως προδιαγράφεται στην εκφώνηση)
  Στον φάκελο files περιέχονται τα αρχεία που χρησιμοποιήθηκαν για virusesFile και countriesFile κατά την διάρκεια
  ανάπτυξης της εφαρμογής ως ορίσματα στο bash script. Φυσικά, μπορείτε να μην τα χρησιμοποιήσετε ή/και να τα διαγράψετε.
  Εκκαθάριση: make clean
  
Επιλογές:
  [] Το πρόγραμμα κάνει πολύ βασικούς ελέγχους για το input. 
    [] Ελέγχει πλήθος ορισμάτων στις εντολές, όμως δεν ελέγχει κατ'ανάγκην την σειρά τους, ούτε κάνει έλεγχο εγκυρότητας 
    χαρακτήρα προς χαρακτήρα.
    [] Οι μόνοι έλεγχοι που γίνονται όσον αφορά τα δεδομένα είναι η εγκυρότητα των ημερομηνιών στις εντολές
    populationStatus και popStatusByAge (εκεί εξασφαλίζεται και το ότι η 2η ημερομηνία είναι μεταγενέστερη της 
    πρώτης), και όταν δίνονται ολόκληρα records ενός πολίτη (π.χ. parsing του αρχείου, insertCitizenRecords και vaccinateNow), 
    ελέγχεται ότι δεν έχει εισαχθεί ήδη αυτό το ID αλλά με άλλα στοιχεία στο σύστημα. 
    [] Το πρόγραμμα όμως βασίζεται στο ότι το YES και NO θα βρίσκονται σε συγκεκριμένη θέση όταν δίνεται ολόκληρη εγγραφή. 
    Το πρόγραμμα ελέγχει για εγγραφές με NO αν έχουν ημερομηνία μετά και τις απορρίπτει. Επίσης, απορρίπτει εγγραφές με YES
    χωρίς ημερομηνία.
  [] Οι τρεις κύριες οντότητες του προγράμματος είναι οι χώρες, οι ιοί και οι πολίτες.
    [] Ο πολίτης περιλαμβάνει τα στοιχεία που τον αφορούν συγκεκριμένα: ID, ονοματεπώνυμο, χώρα και ηλικία.
    Το πεδίο χώρα είναι δείκτης στην οντότητα της αντίστοιχης χώρας, που περιλαμβάνει μόνο το όνομα αυτής.
    [] Ο ιός πέρα από το όνομά του περιλαμβάνει δύο skiplists (μία για τους ανθρώπους που έχουν εμβολιαστεί ρητά για αυτόν και μία για αυτούς
    που επίσης ρητά *δεν* έχουν εμβολιαστεί) και το αντίστοιχο bloomfilter. Άρα, κάθε φορά που διαβάζεται ένα νέο όνομα
    ιού από το inputFile ή από τις insertCitizenRecord και vaccinateNow δημιουργείται αυτή η τριάδα.
  [] Οι χώρες, οι ιοί και οι πολίτες φυλάσσονται σε ένα hashmap για κάθε κατηγορία. Ο τύπος και οι λειτουργίες
  του hashmap είναι ίδια και για τις τρεις οντότητες. Κάθε λίστα που αντιστοιχεί σε έναν hashbucket κρατά τον τύπο
  στοιχείου που φυλά μέσα της ώστε να γνωρίζει πως θα κάνει συγκρίσεις μεταξύ των στοιχείων της λίστας όταν γίνεται
  αναζήτηση. Ο αριθμός buckets είναι συγκεκριμένος για κάθε έναν από τους 3 maps, και έχει επιλεχθεί ώστε να είναι
  μίας τάξης μεγέθους μικρότερος από το αναμενόμενο πλήθος εισαγωγών στον χάρτη και πρώτος. Στην περίπτωση που
  εισαχθούν πάνω από 10000 πολίτες στον χάρτη παύει να είναι μία τάξη μεγέθους μικρότερο το πλήθος αυτό, όμως
  δεν φάνηκε διακύμανση στην απόδοση.
  [] Το skiplist έχει υλοποιηθεί ως συστάδα λιστών. Κάθε κόμβος σε κάθε επίπεδο έχει ένα ID και έναν δείκτη σε char (για την ημερομηνία)
  και σε citizen, όμως αυτοί οι δείκτες έχουν νόημα μόνο για το επίπεδο 0 (στο σχήμα στην εκφώνηση, το κάτω επίπεδο της λίστας).
  Κάθε κόμβος επίσης έχει έναν δείκτη στον κόμβο του αμέσως επόμενου/από κάτω επιπέδου του με το ίδιο ID, ώστε να περιορίζεται 
  το εύρος αναζήτησης μεταξύ κόμβων και ώστε αν ένα ID βρεθεί σε επίπεδο υψηλότερο του 0, να προσπελαστεί γρήγορα η ακολουθία 
  δεικτών ώστε να βρεθεί η πληροφορία εμβολιασμού στο επίπεδο 0.
    [] Το σε πόσες από τις λίστες θα εμφανίζεται ένας κόμβος με ένα ID, δηλαδή σε τι ύψος της λίστας θα βρίσκεται ο κόμβος
    αυτός, επιλέγεται τυχαία. Η πιθανότητα για την προσθήκη σε κάθε επίπεδο είνα 50% δεδομένου ότι βρίσκεται στο ακριβώς από
    κάτω επίπεδο. Υπάρχει όριο στο πόσες λίστες/ύψη μπορεί να έχει η skiplist, και αυτό είναι το κάτω φράγμα του
    λογαρίθμου με βάση το 2 μίας προσέγγισης του ανθρώπινου πληθυσμού.
  [] Το bloom filter, πέρα από την εντολή vaccineStatusBloom, χρησιμοποιείται στο παρασκήνιο και κατά το parsing του αρχείου
  και κατά την εισαγωγή εγγραφής με την insertCitizenRecord. Όταν η εγγραφή έχει ΝΟ, ελέγχουμε την τιμή που θα επιστρέψει το φίλτρο
  για το συγκεκριμένο ID: αν επιστρέψει 1, ενδέχεται ο πολίτης να έχει εμβολιαστεί άρα τον αναζητούμε στο αντίστοιχο skiplist,
  αλλιώς γνωρίζουμε ότι σίγουρα δεν έχει εμβολιαστεί και μπορούμε να τον εισάγουμε στην non-vaccinated-skiplist.
  [] Αν μία εγγραφή είναι μη έγκυρη, δηλαδή έχει ΝΟ με ημερομηνία εμβολιασμού ή YES χωρίς, τότε ο πολίτης, η χώρα και ο ιός
  δεν διαγράφονται. Παραμένουν στο hashmap, καθώς μπορεί να χρειαστούν για επόμενες εγγραφές.
  [] Η έννοια του μη εμβολιασμένου διαφέρει μεταξύ των διαφόρων commands του προγράμματος.
    [] Στην εντολή vaccineStatus, μη εμβολιασμένος θεωρείται ο πολίτης αν δεν περιέχεται στην skiplist εμβολιασμένων του ιού.
    [] Στις εντολές populationStatus, popStatusByAge, list-nonVaccinated-Persons, ο πολίτης θεωρείται μη εμβολιασμένος αν περιέχεται
    ρητά στην skiplist μη εμβολιασμένων του ιού.
  [] Ο τύπος για τον υπολογισμό των ποσοστών στις populationStatus, popStatusByAge είναι ο εξής:
    Αριθμητής: Πολίτες που εμβολιάστηκαν εντός των ημερομηνιών που δόθηκαν ως ορίσματα στην εντολή.
    Παρονομαστής: Άθροισμα συνολικών εμβολιασμένων και μη εμβολιασμένων για τον συγκεκριμένο ιό και χώρα, ανεξαρτήτως ημερομηνίας.
  [] Οι παραπάνω εντολές ΔΕΝ υποστηρίζουν εκδοχή χωρίς ημερομηνίες. Αν επιθυμείτε να δείτε όλους τους εμβολιασμένους σε μία χώρα για
  έναν ιό, δίνοντας input που έχει παραχθεί από το bash script της εργασίας, δίνετε τις ημερομηνίες 01-01-2000 01-01-2022, καθώς σε αυτό
  το χρονικό πλαίσιο παράγονται οι ημερομηνίες.
  [] Καθώς τα age ranges έτσι όπως δίνονταν στην εκφώνηση στην εντολή popStatusByAge επικαλύπτονταν, το πρόγραμμα διαχειρίζεται
  τις ομάδες ως εξής:
    [] Η ομάδα 0-20 περιλαμβάνει άτομα μέχρι ΚΑΙ το 19ο έτος της ηλικίας τους
    [] Η ομάδα 20-40 περιλαμβάνει άτομα από το 20ο μέχρι ΚΑΙ το 39ο έτος της ηλικίας τους
    [] Η ομάδα 40-60 περιλαμβάνει άτομα από το 40ο μέχρι ΚΑΙ το 59ο έτος της ηλικίας τους
    [] Η ομάδα 60+ περιλαμβάνει άτομα από 60 ετών και άνω.
  [] Το format της ημερομηνίας είναι DD-MM-YYYY, δηλαδή οι ημέρες και μήνες μικρότερα του 10 εξακολουθούν να είναι διψήφια,
  όντας της μορφής 0Χ. Δεν επιβάλλει αυτόν τον περιορισμό στο format κατά το parsing του αρχείου εισόδου ούτε κατά την κλήση
  της εντολής insertCitizenRecord, όμως τον επιβάλλει για τις ημερομηνίες στις populationStatus και popStatusByAge. Αν όμως οι ημερομηνίες
  με μονοψήφια ημέρα ή/και μήνα εισαχθούν με διαφορετική μορφή στο αρχείο, οι λειτουργίες μέτρησης ποσοστών πληθυσμού βρίσκουν σωστά
  το πλήθος των εμβολιασμένων, αρκεί τα arguments της εντολής να έχουν δωθεί με την αναμενόμενη μορφή.  
  
Bash Script:
  [] Και στις δύο εκδοχές, το ID γίνεται generate ως εξής: Κάνουμε generate το μήκος (από 1-4 ψηφία) και κατόπιν κάνουμε
  generate τόσα ψηφία όσα υπαγορεύει το μήκος. Με παρόμοιο τρόπο γίνονται generate και τα ονόματα: γίνεται generate ένας
  αριθμός από το 3 έως το 12 που είναι το μήκος της λέξης, και μετά επιλέγονται τυχαία τόσοι χαρακτήρες. Τα ονόματα έχουν
  μόνο κεφαλαία γράμματα.
  [] Στην εκδοχή ΧΩΡΙΣ διπλότυπα, καθώς το πρόγραμμα καθυστερούσε πολύ να τερματίσει με 10.000 εγγραφές προς δημιουργία
  αφού αυτό ήταν το συνολικό πλήθος των δυνατών παραγόμενων ID, όταν δημιουργήσει 9000 εγγραφές εντοπίζει ποια είναι τα 1000
  ID που δεν έχει κάνει generate τυχαία και τα κρατά σε έναν πίνακα. Από εκεί και πέρα, επιλέγει ένα ID τυχαία από τα στοιχεία
  του πίνακα.
  [] Στην εκδοχή ΜΕ διπλότυπα, δεν επιβάλλεται κάποιου είδους διπλοτύπιση, καθώς παρατηρήθηκε ότι με σχετικά μικρό πλήθος
  εγγραφών (π.χ. 1000) προκύπτει ικανοποιητικός αριθμός διπλοτύπων. Ιδιαίτερα σε 10.000 εγγραφές και άνω, πολλές είναι περιπτώσεις
  που υπάρχουν πολλαπλά διπλότυπα για τον ίδιο άνθρωπο και ιό.
  [] Το script δημιουργεί με 30% πιθανότητα εγγραφές με NO και ημερομηνία εμβολιασμού. Δεν δημιουργεί επαφές με YES χωρίς
  ημερομηνία, όμως όπως αναφέρθηκε και πιο πάνω, το πρόγραμμα μπορεί να διαχειριστεί αυτές τις περιπτώσεις.